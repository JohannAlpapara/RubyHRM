<div class="row">
    <div class="col-lg-12">
        <h1 class="page-header">Employees</h1>
    </div>
</div>

<div class="panel panel-default">
	<div class="panel-heading">
		<i class="fa fa-search fa-fw"></i> Search Employees&nbsp;&nbsp;&nbsp;<button type="button" class="btn btn-default btn-xs" data-toggle="collapse" data-target="#collapse1">+</button>
	</div>
	<div id="collapse1" class="panel-collapse collapse" >
		<div class="panel-body">
			<%= form_tag(people_path, :method => "get", id: "search-form", :class => "form-inline") do %>
				<div class="form-group">
					<%= label_tag :search, "Name", :class => "control-label" %>
					<%= text_field_tag :search, params[:search], :placeholder => "Search Name", :class => "form-control" %>
				</div>
				<%= button_tag(:type => "submit", :name => nil, :class => "btn btn-default") do %>
						<span class="fa fa-search fa-fw"></span> <%= t('button.search') %>
				<% end %>
			<% end %>
		</div>
	</div>
</div>

<%= link_to new_person_path, :class => "btn btn-success" do %>
	<i class="fa fa-plus fa-fw"></i> Add New Employee
<% end %>
<div class="top15">
	<% if @people.empty? %>
		<p>There were no results found.</p>
	<% else %>	
		<div class="table-responsive">
			<table class="table table-striped table-hover">
				<thead>
					<tr>
						<th></th>
						<th>Employee ID</th>
						<th>First Name</th>
						<th>Last Name</th>
						<th>Job Title</th>
						<th>Department</th>
						<th>Supervisor(s)</th>
						<th></th>
					</tr>
				</thead>
				<tbody>
					<% @people.each do |p| %>
					<tr>
						<td class="vert-align"><%= image_tag p.photo.url(:medium), :class => "img-circle" %></td>
						<td class="vert-align">
							<% if p.active? %>
								<%= p.employee_id %>
							<% else %>
								<%= p.employee_id %> (Inactive)
							<% end %>
						</td>
						<td class="vert-align"><%= p.first_name %></td>
						<td class="vert-align"><%= p.last_name %></td>
						<td class="vert-align"><%= p.job_title.job_title unless p.job_title.nil? %></td>
						<td class="vert-align"><%= p.department.name unless p.department.nil? %></td>
						<td class="vert-align">
							<%= p.reporting_relationships.map { |rr| rr.manager.full_name}.join(", ") %>
						</td>
						<td class="vert-align">
							<%= link_to person_path(p.id), :class => "btn btn-info btn-xs" do %>
								<i class="fa fa-search fa-fw"></i> <%= t('button.view') %>
							<% end %>
						</td>
					</tr>
					<% end %>
				</tbody>
			</table>
		</div>
	<% end %>
</div>

